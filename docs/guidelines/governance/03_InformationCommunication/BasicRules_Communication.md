# 基本ルール：コミュニケーション

## 1. ユーザーとのチャット（「Chat with team」との関連性）

### AIエージェントの役割と自己紹介:

「Chat with team」機能では、AIエージェントが各部門（Production、Quality、Maintenance、Logistics）の専門家として自己紹介し、参加するものとする。例：

* #### 「Production-AI」：生産ラインの最適化や進捗管理を担当
* #### 「Quality-AI」：品質管理データ分析と問題検出を担当
* #### 「Maintenance-AI」：設備保全と予防保守を担当

### 推奨ガイドライン:

* #### 明確な質問形式：
  `「Assembly Line #3の稼働再開予定は？」`のような具体的な質問を推奨する。
* #### コマンド形式：
  `「/report line-1 efficiency」`のような構造化コマンドの活用を推奨する。
* #### 自然言語：
  `「Line #4の問題点を教えて」`のような会話的な質問も受け付ける。

### 応答時間と複雑な問い合わせ:

単純な質問： 5秒以内に応答することを目指す。

複雑な分析： 30秒以内に進捗を報告し、完了まで1分ごとに更新する。

#### 多段階の問い合わせ：

ステップごとに確認を求め、進行状況を表示する。

### 非同期コミュニケーション:

スクリーンショットにある「Documentation」や「Discussions」機能を活用し、以下を実装する。

* #### 非同期コメント：
  各アセンブリラインの詳細ページにコメント機能を提供する。
* #### 自動レポート：
  指定時間に自動生成される日次/週次レポートを提供する。
* #### タスクコメント：
  Activity欄の各タスク（#123など）へのコメント機能を提供する。

## 2. 顧客とのメール

### AIエージェントの主体性:

* #### 自動送信：
  納期遅延警告、品質問題の通知など緊急性の高い情報を自動送信する。
* #### ユーザー承認後送信：
  見積り、提案書、契約書など重要な文書はユーザーの承認後に送信する。
* #### 顧客からの問い合わせ返信：
  標準的な質問には自動返信し、複雑な内容は人間の承認後に返信する。

### メールテンプレートと署名:

* #### 部門別テンプレート：
  Production、Quality、Maintenance、Logisticsごとに統一フォーマットを使用する。
* #### 階層的署名：
  `AI Assistant, [部門名] Department, [会社名]` の形式を使用する。
* #### 責任者情報：
  `Supervised by [人間の担当者名]` を明記する。

### 機密情報の取り扱い:

* #### 自動分類：
  機密レベルに応じた自動タグ付け（社内限定、NDA必須など）を行う。
* #### 暗号化：
  機密情報を含む場合は自動暗号化を行う。
* #### 送信前確認：
  機密情報を含む場合は必ず人間の承認を得る。

## 3. 他のAIエージェントとの連携

### データ形式とプロトコル:

* JSON形式： 標準化された構造でデータ交換を行う。
* REST APIとWebSocket： リアルタイム性の必要に応じて使い分ける。
* 認証： OAuth 2.0によるエージェント間認証を使用する。

### 再試行ルールとエラー管理:

* 指数バックオフ：
    * 5秒
    * 15秒
    * 45秒...
* 最大再試行回数： 3回までとし、それ以上はエスカレーションする。
* エラーコード体系： `DEPT-ERR-CODE` 形式で統一する（例：`PROD-API-404`）。

### セキュリティ考慮事項:

* 通信暗号化： TLS 1.3以上を使用する。
* 権限管理： 役割ベースのアクセス制御（RBAC）を適用する。
* 監査ログ： すべての連携を記録し、異常検知システムで監視する。

## 4. タスク依頼（チケット方式）

### チケット情報:

以下の情報を含めるものとする。

* #### 基本情報：
  ID、タイトル、優先度（Critical/High/Medium/Low）、状態
* #### 担当情報：
  作成者、担当者、承認者
* #### 時間情報：
  作成日時、期限、予定工数
* #### 詳細情報：
  詳細な説明、関連リソース、前提条件、受入基準

### チケットワークフロー:

* 起票： ユーザーまたはAIが異常検知時に自動起票する。
* 割り当て： 担当部門AIが自動的に適切な担当者へ割り当てる。
* 進捗管理： 5段階の進捗状況（New→In Progress→Testing→Review→Closed）で管理する。
* 完了報告： 解決策と結果を自動的にドキュメント化する。

### 移行に関する注意点:

* マッピング： ローカルファイル形式から標準チケットシステムへのフィールドマッピングを行う。
* 履歴保持： 移行時に過去の履歴・コメントを保持する。
* 段階的移行： 重要度の高いプロジェクトから順次移行する。

## 5. エスカレーションと役割の明確化

### 役割の関連付け:

UI素案の部門構造に合わせて以下のように定義する。

* #### 「部下AI」：
  各部門（Production、Quality等）の専門AIエージェント
* #### 「部長AI」：
  各部門の統括AIエージェント（例：Production Manager AI）
* #### 「マネージャーAI」：
  システム全体を統括するAIエージェント
* #### 「ユーザー」：
  人間のファクトリーマネージャーや管理者

### エスカレーション基準:

* 時間基準： 解決不能状態が15分以上継続した場合。
* 影響範囲： 複数のラインや部門に影響する問題が発生した場合。
* 重要度： 安全性、品質、生産計画に重大な影響を与える問題が発生した場合。

### エスカレーション時の情報：

* 問題概要： 何が、いつ、どこで発生したか。
* 試行済み対策： これまでの対応と結果。
* データ： 関連するログや測定値。
* 推奨対応： AIの分析に基づく対応オプション。

## 6. ユーザーへの報告

### チャット通知の形式と内容:

* 緊急度表示： 🔴（緊急）、🟠（重要）、🟡（注意）などの視覚的マーカーを使用する。
* 構造化情報： 問題、影響、対応オプションを明確に区分して表示する。
* リンク： 詳細情報やダッシュボードへの直接リンクを提供する。

### ダッシュボードのエラー表示:

* 階層的表示： 概要レベルから詳細レベルへドリルダウン可能とする。
* 影響度分類： 生産停止、品質低下、効率低下などカテゴリ分けを行う。
* アクション可能な情報： 「詳細を見る」「対応指示」「解決済みとする」などの操作ボタンを提供する。

## 7. 「Discussions」機能の活用

### 想定される使用目的:

* 特定問題の専門的議論（例：品質問題の原因分析）。
* 改善提案のブレインストーミング（例：生産効率化のアイデア収集）。
* 知識共有（例：ベストプラクティスやノウハウの蓄積）。

### AIエージェント参加ルール:

* 招待制： 関連する専門知識を持つAIのみ参加を許可する。
* 根拠提示： 発言には必ずデータや論理的根拠を添えることを義務付ける。
* 要約機能： 長期間の議論を定期的に要約し、重要ポイントを抽出する機能を実装する。

## 8. コミュニケーションのトーンとスタイル

### 状況に応じたトーン:

* 緊急時： 簡潔明瞭、行動指向の表現を用いる（例：「Line #4停止。電源ユニット故障。交換必要」）。
* 技術的説明： 専門用語を適切に使用し、必要に応じて解説を添える。
* 定例報告： 構造化された形式で、比較データや傾向を強調する。

### 相手に応じたスタイル:

* 技術者向け： 詳細な技術情報と根拠を重視する。
* 管理者向け： ビジネスインパクトと意思決定に必要な情報を優先する。
* 新人向け： 基本的な説明と学習リソースへのリンクを提供する。

## 9. 機密情報の取り扱い

### コミュニケーションでの機密情報ルール:

* 自動識別： 機密情報のパターンを認識し、自動的にマスキングする機能を実装する。
* アクセス制限： 「閲覧権限者のみ」というタグを付け、限定公開とする。
* 期限設定： 機密情報へのアクセスに時間制限を設ける。

## 10. コミュニケーションログの記録

### 記録期間と目的:

* 通常ログ： 3ヶ月間保存（日常的な参照用）。
* 重要決定ログ： 1年間保存（監査や分析用）。
* 問題解決ログ： 3年間保存（ナレッジベース構築用）。
* 法的要件ログ： 法令に基づく期間保存（コンプライアンス用）。